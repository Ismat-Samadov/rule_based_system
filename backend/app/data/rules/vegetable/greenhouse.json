{
  "version": "1.0.0",
  "category": "greenhouse",
  "farm_type": "vegetable",
  "description": "Sera idarəetmə qaydaları",
  "last_updated": "2025-12-26",
  
  "rules": [
    {
      "rule_id": "VEG_GH_001",
      "name_az": "Sera temperatur - Həddən artıq istilik",
      "name_en": "Greenhouse temperature - Overheating",
      "priority": "critical",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.growing_type", "operator": "==", "value": "greenhouse"},
          {"field": "greenhouse_context.inside_temperature", "operator": ">", "value": 35}
        ]
      },
      "action": {
        "type": "emergency_cooling",
        "urgency": "critical",
        "urgency_score": 100,
        "immediate_actions_az": [
          "Ventilyasiyanı TAM açın",
          "Kölgələndirmə örtüyünü çəkin",
          "Dumanlama/suvarma sistemi ilə soyutma",
          "Yan pəncərələri açın"
        ]
      },
      "message_az": "KRİTİK: Sera temperaturu {inside_temperature}°C! 35°C-dən yuxarı temperatur çiçək tökülməsinə və meyvə zədələnməsinə səbəb olur. DƏRHAL soyutma tədbirləri!",
      "message_en": "CRITICAL: Greenhouse temperature {inside_temperature}°C! Above 35°C causes flower drop and fruit damage. IMMEDIATE cooling measures!"
    },
    {
      "rule_id": "VEG_GH_002",
      "name_az": "Sera temperatur - Həddən artıq soyuq",
      "name_en": "Greenhouse temperature - Too cold",
      "priority": "critical",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.growing_type", "operator": "==", "value": "greenhouse"},
          {"field": "greenhouse_context.inside_temperature", "operator": "<", "value": 12}
        ]
      },
      "action": {
        "type": "emergency_heating",
        "urgency": "critical",
        "urgency_score": 95,
        "immediate_actions_az": [
          "İstilik sistemini yandırın",
          "Ventilyasiyanı bağlayın",
          "Gecə örtüyü/istilik perdəsi istifadə edin",
          "Əlavə isitmə mənbəsi düşünün"
        ]
      },
      "message_az": "KRİTİK: Sera temperaturu {inside_temperature}°C! Pomidor və xiyar üçün 12°C-dən aşağı temperatur böyüməni dayandırır. İstilik lazımdır!",
      "message_en": "CRITICAL: Greenhouse temperature {inside_temperature}°C! Below 12°C stops growth for tomato and cucumber. Heating required!"
    },
    {
      "rule_id": "VEG_GH_003",
      "name_az": "Sera rütubət - Həddən artıq yüksək",
      "name_en": "Greenhouse humidity - Too high",
      "priority": "high",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.growing_type", "operator": "==", "value": "greenhouse"},
          {"field": "greenhouse_context.inside_humidity", "operator": ">", "value": 85}
        ]
      },
      "action": {
        "type": "reduce_humidity",
        "urgency": "high",
        "urgency_score": 80,
        "actions_az": [
          "Ventilyasiyanı artırın",
          "Suvarma vaxtını səhərə keçirin",
          "Yarpaq arasını seyrəldin (budama)",
          "Havalandırma fanları istifadə edin"
        ],
        "risk_az": "Göbələk xəstəlikləri riski yüksək (Botrytis, Mildiu)"
      },
      "message_az": "Rütubət çox yüksək: {inside_humidity}%. Göbələk xəstəlikləri riski! Ventilyasiyanı artırın.",
      "message_en": "Humidity too high: {inside_humidity}%. Fungal disease risk! Increase ventilation."
    },
    {
      "rule_id": "VEG_GH_004",
      "name_az": "Sera rütubət - Həddən artıq aşağı",
      "name_en": "Greenhouse humidity - Too low",
      "priority": "medium",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.growing_type", "operator": "==", "value": "greenhouse"},
          {"field": "greenhouse_context.inside_humidity", "operator": "<", "value": 50}
        ]
      },
      "action": {
        "type": "increase_humidity",
        "urgency": "medium",
        "urgency_score": 60,
        "actions_az": [
          "Damcı suvarmanı artırın",
          "Dumanlama sistemini işə salın",
          "Döşəməni isladın"
        ],
        "risk_az": "Çiçək tökülməsi, zəif meyvə bağlanması"
      },
      "message_az": "Rütubət aşağıdır: {inside_humidity}%. Çiçək tökülməsi riski var.",
      "message_en": "Humidity too low: {inside_humidity}%. Flower drop risk."
    },
    {
      "rule_id": "VEG_GH_005",
      "name_az": "Sera temperatur optimal - Pomidor",
      "name_en": "Greenhouse optimal temperature - Tomato",
      "priority": "info",
      "enabled": true,
      "applicable_to": ["tomato"],
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.crop_type", "operator": "==", "value": "tomato"},
          {"field": "crop_context.growing_type", "operator": "==", "value": "greenhouse"},
          {"field": "greenhouse_context.inside_temperature", "operator": ">=", "value": 22},
          {"field": "greenhouse_context.inside_temperature", "operator": "<=", "value": 28}
        ]
      },
      "action": {
        "type": "info",
        "urgency": "info",
        "urgency_score": 10
      },
      "message_az": "Temperatur optimal: {inside_temperature}°C. Pomidor üçün ideal aralıq 22-28°C.",
      "message_en": "Temperature optimal: {inside_temperature}°C. Ideal range for tomato is 22-28°C."
    },
    {
      "rule_id": "VEG_GH_006",
      "name_az": "Sera temperatur optimal - Xiyar",
      "name_en": "Greenhouse optimal temperature - Cucumber",
      "priority": "info",
      "enabled": true,
      "applicable_to": ["cucumber"],
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.crop_type", "operator": "==", "value": "cucumber"},
          {"field": "crop_context.growing_type", "operator": "==", "value": "greenhouse"},
          {"field": "greenhouse_context.inside_temperature", "operator": ">=", "value": 25},
          {"field": "greenhouse_context.inside_temperature", "operator": "<=", "value": 30}
        ]
      },
      "action": {
        "type": "info",
        "urgency": "info",
        "urgency_score": 10
      },
      "message_az": "Temperatur optimal: {inside_temperature}°C. Xiyar üçün ideal aralıq 25-30°C.",
      "message_en": "Temperature optimal: {inside_temperature}°C. Ideal range for cucumber is 25-30°C."
    },
    {
      "rule_id": "VEG_GH_007",
      "name_az": "Gecə temperaturu nəzarəti",
      "name_en": "Night temperature control",
      "priority": "high",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.growing_type", "operator": "==", "value": "greenhouse"},
          {"field": "weather.time_of_day", "operator": "==", "value": "night"},
          {"field": "greenhouse_context.inside_temperature", "operator": "<", "value": 15}
        ]
      },
      "action": {
        "type": "night_heating",
        "urgency": "high",
        "urgency_score": 75,
        "target_night_temp_by_crop": {
          "tomato": {"min": 15, "max": 18},
          "cucumber": {"min": 18, "max": 20},
          "pepper": {"min": 16, "max": 18}
        }
      },
      "message_az": "Gecə temperaturu aşağıdır: {inside_temperature}°C. İsitməni yandırın - minimum temperatur toxum növünə görə 15-18°C olmalıdır.",
      "message_en": "Night temperature low: {inside_temperature}°C. Turn on heating - minimum temperature should be 15-18°C depending on crop."
    },
    {
      "rule_id": "VEG_GH_008",
      "name_az": "CO2 səviyyəsi xatırlatması",
      "name_en": "CO2 level reminder",
      "priority": "low",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.growing_type", "operator": "==", "value": "greenhouse"},
          {"field": "greenhouse_context.ventilation_status", "operator": "==", "value": "closed"}
        ]
      },
      "action": {
        "type": "info",
        "urgency": "low",
        "urgency_score": 25
      },
      "message_az": "Ventilyasiya bağlıdır. Səhər saatlarında CO2 səviyyəsi artdıqca bitki fotosintezi artır, lakin rütubət yüksəlir. Balans saxlayın.",
      "message_en": "Ventilation closed. CO2 levels increase in morning boosting photosynthesis, but humidity rises. Maintain balance."
    }
  ],
  
  "optimal_conditions_reference": {
    "tomato": {
      "day_temp": {"min": 22, "max": 28, "optimal": 25},
      "night_temp": {"min": 15, "max": 18},
      "humidity": {"min": 60, "max": 70},
      "critical_high_temp": 35,
      "critical_low_temp": 10
    },
    "cucumber": {
      "day_temp": {"min": 25, "max": 30, "optimal": 27},
      "night_temp": {"min": 18, "max": 20},
      "humidity": {"min": 70, "max": 85},
      "critical_high_temp": 35,
      "critical_low_temp": 12
    },
    "pepper": {
      "day_temp": {"min": 22, "max": 28, "optimal": 25},
      "night_temp": {"min": 16, "max": 18},
      "humidity": {"min": 60, "max": 70},
      "critical_high_temp": 32,
      "critical_low_temp": 12
    }
  }
}
