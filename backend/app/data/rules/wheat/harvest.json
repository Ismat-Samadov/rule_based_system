{
  "version": "1.0.0",
  "category": "harvest",
  "farm_type": "wheat",
  "description": "Buğda yığım qaydaları",
  "last_updated": "2025-12-26",
  
  "rules": [
    {
      "rule_id": "WHT_HARV_001",
      "name_az": "Yığıma hazırlıq göstəricisi",
      "name_en": "Harvest readiness indicator",
      "priority": "high",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.stage", "operator": "==", "value": "maturity"},
          {"field": "crop_context.days_in_stage", "operator": ">=", "value": 10},
          {"field": "crop_context.grain_moisture", "operator": "<=", "value": 14}
        ]
      },
      "action": {
        "type": "harvest",
        "urgency": "high",
        "urgency_score": 85,
        "timing_az": "Növbəti 3-5 gün ərzində, quru havada"
      },
      "message_az": "Buğda yığıma hazırdır. Dən rütubəti {grain_moisture}%, ideal şərait. Yağışdan əvvəl yığmağa çalışın.",
      "message_en": "Wheat is ready for harvest. Grain moisture {grain_moisture}%, ideal conditions.",
      "readiness_indicators_az": [
        "Dən rütubəti 13-14%",
        "Sünbül tamamilə saralmış (saman sarısı)",
        "Dən bərk, dırnaqla çətinliklə sınır",
        "Saman quru və kövrək"
      ]
    },
    {
      "rule_id": "WHT_HARV_002",
      "name_az": "Erkən yığım xəbərdarlığı",
      "name_en": "Early harvest warning",
      "priority": "medium",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.stage", "operator": "==", "value": "maturity"},
          {"field": "crop_context.grain_moisture", "operator": ">", "value": 16}
        ]
      },
      "action": {
        "type": "wait",
        "urgency": "medium",
        "urgency_score": 50
      },
      "message_az": "Hələ yığım üçün tezdir. Dən rütubəti {grain_moisture}% - ideal 13-14%. Sünbüldə yaşıl hissələr varsa, daha gözləyin.",
      "message_en": "Too early for harvest. Grain moisture {grain_moisture}% - ideal is 13-14%.",
      "early_harvest_problems_az": [
        "Yüksək qurutma xərcləri",
        "Dən çəkisi tam deyil",
        "Saxlama zamanı küflənmə riski"
      ]
    },
    {
      "rule_id": "WHT_HARV_003",
      "name_az": "Gecikmiş yığım - TƏCİLİ",
      "name_en": "Delayed harvest - URGENT",
      "priority": "critical",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.stage", "operator": "==", "value": "maturity"},
          {"field": "crop_context.days_in_stage", "operator": ">=", "value": 20},
          {"field": "crop_context.grain_shattering", "operator": "==", "value": true}
        ]
      },
      "action": {
        "type": "harvest",
        "urgency": "critical",
        "urgency_score": 100,
        "timing_az": "DƏRHAL"
      },
      "message_az": "TƏCİLİ: Dən tökülməsi başlayıb! Hər gün 2-3% məhsul itkisi ola bilər. Dərhal yığıma başlayın.",
      "message_en": "URGENT: Grain shattering has started! 2-3% yield loss per day possible. Start harvest immediately.",
      "late_harvest_problems_az": [
        "Dən tökülməsi ilə məhsul itkisi",
        "Sünbüllərin əyilməsi",
        "Keyfiyyət azalması",
        "Yağış dənə zərər verə bilər"
      ]
    },
    {
      "rule_id": "WHT_HARV_004",
      "name_az": "İdeal hava şəraiti - Yığım tövsiyəsi",
      "name_en": "Ideal weather conditions - Harvest recommended",
      "priority": "high",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.stage", "operator": "==", "value": "maturity"},
          {"field": "crop_context.grain_moisture", "operator": "<=", "value": 14},
          {"field": "weather.humidity", "operator": "<", "value": 60},
          {"field": "weather.temperature", "operator": ">=", "value": 25},
          {"field": "weather.temperature", "operator": "<=", "value": 35},
          {"field": "weather.rainfall_forecast_48h", "operator": "==", "value": false}
        ]
      },
      "action": {
        "type": "harvest",
        "urgency": "high",
        "urgency_score": 90,
        "timing_az": "Bu gün - ideal şərait"
      },
      "message_az": "Yığım üçün İDEAL şərait: rütubət {humidity}%, temperatur {temperature}°C, yağış gözlənilmir. Bu fürsəti qaçırmayın!",
      "message_en": "IDEAL harvest conditions: humidity {humidity}%, temperature {temperature}°C, no rain forecast."
    },
    {
      "rule_id": "WHT_HARV_005",
      "name_az": "Yağışdan əvvəl təcili yığım",
      "name_en": "Urgent harvest before rain",
      "priority": "critical",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.stage", "operator": "==", "value": "maturity"},
          {"field": "crop_context.grain_moisture", "operator": "<=", "value": 16},
          {"field": "weather.rainfall_forecast_48h", "operator": "==", "value": true},
          {"field": "weather.rainfall_forecast_amount_mm", "operator": ">", "value": 10}
        ]
      },
      "action": {
        "type": "harvest",
        "urgency": "critical",
        "urgency_score": 95,
        "timing_az": "DƏRHAL - yağışdan əvvəl"
      },
      "message_az": "TƏCİLİ: Növbəti 48 saatda {rainfall_forecast_amount_mm}mm yağış gözlənilir! Mümkün qədər çox sahəni yığın.",
      "message_en": "URGENT: {rainfall_forecast_amount_mm}mm rain expected in 48 hours! Harvest as much area as possible.",
      "rain_damage_az": [
        "Dən rütubəti artır, qurutma lazım",
        "Cücərmə başlaya bilər",
        "Keyfiyyət ciddi azalır",
        "Küflənmə riski"
      ]
    },
    {
      "rule_id": "WHT_HARV_006",
      "name_az": "Yüksək rütubət - Yığımı təxirə sal",
      "name_en": "High humidity - Postpone harvest",
      "priority": "medium",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.stage", "operator": "==", "value": "maturity"},
          {"field": "weather.humidity", "operator": ">", "value": 75}
        ]
      },
      "action": {
        "type": "wait",
        "urgency": "medium",
        "urgency_score": 40,
        "timing_az": "Rütubət düşənə qədər gözləyin"
      },
      "message_az": "Rütubət {humidity}% - yığım üçün çox yüksək. Günün isti saatlarını (11:00-18:00) gözləyin, rütubət düşəcək.",
      "message_en": "Humidity {humidity}% - too high for harvest. Wait for warmer hours (11:00-18:00)."
    },
    {
      "rule_id": "WHT_HARV_007",
      "name_az": "Səhər şehi - Gözləyin",
      "name_en": "Morning dew - Wait",
      "priority": "low",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "weather.time_of_day", "operator": "<", "value": "10:00"},
          {"field": "weather.humidity", "operator": ">", "value": 70}
        ]
      },
      "action": {
        "type": "wait",
        "urgency": "low",
        "urgency_score": 25,
        "timing_az": "Şeh quruyana qədər (10:00-11:00)"
      },
      "message_az": "Səhər şehi var. Yığıma 10:00-11:00-dan sonra başlayın, şeh qurusun.",
      "message_en": "Morning dew present. Start harvest after 10:00-11:00 when dew dries."
    }
  ],
  
  "harvest_best_practices": {
    "timing_az": "Günün ən yaxşı saatları: 11:00-18:00 (şeh quruduqdan sonra, axşam nəmindən əvvəl)",
    "combine_settings_az": "Kombayn sürəti dənin rütubətinə uyğun tənzimlənməli",
    "storage_requirements_az": [
      "Dən rütubəti 14%-dən aşağı olmalı",
      "Təmiz, quru anbar",
      "Zərərvericilərdən qorunma",
      "Ventilyasiya təmin edilməli"
    ]
  },
  
  "grain_moisture_guide": {
    "ideal_harvest": {"min": 13, "max": 14, "description_az": "İdeal yığım rütubəti"},
    "acceptable_harvest": {"min": 14, "max": 16, "description_az": "Qəbul edilən, qısa qurutma lazım"},
    "needs_drying": {"min": 16, "max": 20, "description_az": "Qurutma lazımdır"},
    "too_wet": {"min": 20, "description_az": "Çox yaş - yığım tövsiyə olunmur"}
  },
  
  "yield_estimation": {
    "method_az": "1m² sahədə sünbül sayın, hər sünbüldə dən sayı x orta dən çəkisi",
    "average_yield_kg_per_ha": {
      "excellent": {"min": 5000, "description_az": "Əla"},
      "good": {"min": 4000, "max": 5000, "description_az": "Yaxşı"},
      "average": {"min": 3000, "max": 4000, "description_az": "Orta"},
      "poor": {"max": 3000, "description_az": "Zəif"}
    }
  }
}
