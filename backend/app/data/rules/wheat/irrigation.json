{
  "version": "1.0.0",
  "category": "irrigation",
  "farm_type": "wheat",
  "description": "Buğda suvarma qaydaları",
  "last_updated": "2025-12-26",
  
  "rules": [
    {
      "rule_id": "WHT_IRR_001",
      "name_az": "Kritik temperatur suvarması",
      "name_en": "Critical temperature irrigation",
      "priority": "critical",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "weather.temperature", "operator": ">", "value": 32},
          {"field": "crop_context.stage", "operator": "IN", "value": ["tillering", "stem_extension", "heading", "grain_filling"]},
          {"field": "crop_context.days_since_irrigation", "operator": ">", "value": 1}
        ]
      },
      "action": {
        "type": "irrigate",
        "urgency": "critical",
        "urgency_score": 100,
        "timing_az": "Dərhal - səhər 05:00-07:00 və ya axşam 19:00-21:00",
        "amount_mm_per_ha": {"base": 30, "max": 35}
      },
      "message_az": "TƏCILI: Temperatur {temperature}°C - buğda üçün kritik həddədir. Dərhal suvarma tələb olunur.",
      "message_en": "URGENT: Temperature {temperature}°C is critical for wheat. Immediate irrigation required.",
      "reasoning_az": "32°C-dən yuxarı temperaturda buğda istilik stressinə məruz qalır, məhsuldarlıq 20-40% azala bilər."
    },
    {
      "rule_id": "WHT_IRR_002",
      "name_az": "Torpaq nəmliyi - Cücərmə",
      "name_en": "Soil moisture - Germination",
      "priority": "high",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.stage", "operator": "==", "value": "germination"},
          {"field": "soil.soil_moisture", "operator": "<", "value": 60}
        ]
      },
      "action": {
        "type": "irrigate",
        "urgency": "high",
        "urgency_score": 85,
        "timing_az": "Bu gün",
        "target_moisture": 70,
        "amount_mm_per_ha": 25
      },
      "message_az": "Torpaq nəmliyi {soil_moisture}% - cücərmə üçün minimum 60% olmalıdır.",
      "message_en": "Soil moisture {soil_moisture}% - minimum 60% required for germination."
    },
    {
      "rule_id": "WHT_IRR_003",
      "name_az": "Torpaq nəmliyi - Kollanma",
      "name_en": "Soil moisture - Tillering",
      "priority": "high",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.stage", "operator": "==", "value": "tillering"},
          {"field": "soil.soil_moisture", "operator": "<", "value": 50}
        ]
      },
      "action": {
        "type": "irrigate",
        "urgency": "high",
        "urgency_score": 80,
        "timing_az": "Bu gün",
        "target_moisture": 60,
        "amount_mm_per_ha": 25
      },
      "message_az": "Torpaq nəmliyi {soil_moisture}% - kollanma üçün minimum 50% olmalıdır.",
      "message_en": "Soil moisture {soil_moisture}% - minimum 50% required for tillering."
    },
    {
      "rule_id": "WHT_IRR_004",
      "name_az": "Torpaq nəmliyi - Sünbülləmə (KRİTİK)",
      "name_en": "Soil moisture - Heading (CRITICAL)",
      "priority": "critical",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.stage", "operator": "==", "value": "heading"},
          {"field": "soil.soil_moisture", "operator": "<", "value": 55}
        ]
      },
      "action": {
        "type": "irrigate",
        "urgency": "critical",
        "urgency_score": 95,
        "timing_az": "DƏRHAL - bu mərhələdə su stressi məhsulu 30% azaldır",
        "target_moisture": 65,
        "amount_mm_per_ha": 30
      },
      "message_az": "KRİTİK: Sünbülləmə dövründə torpaq nəmliyi {soil_moisture}%. Bu mərhələdə su stressi məhsulu 30% azalda bilər!",
      "message_en": "CRITICAL: Soil moisture {soil_moisture}% during heading. Water stress at this stage can reduce yield by 30%!"
    },
    {
      "rule_id": "WHT_IRR_005",
      "name_az": "Torpaq nəmliyi - Dən dolması",
      "name_en": "Soil moisture - Grain filling",
      "priority": "high",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.stage", "operator": "==", "value": "grain_filling"},
          {"field": "soil.soil_moisture", "operator": "<", "value": 45}
        ]
      },
      "action": {
        "type": "irrigate",
        "urgency": "high",
        "urgency_score": 75,
        "timing_az": "Növbəti 24 saat ərzində",
        "target_moisture": 55,
        "amount_mm_per_ha": 25
      },
      "message_az": "Torpaq nəmliyi {soil_moisture}% - dən dolması üçün minimum 45% olmalıdır.",
      "message_en": "Soil moisture {soil_moisture}% - minimum 45% required for grain filling."
    },
    {
      "rule_id": "WHT_IRR_006",
      "name_az": "Torpaq nəmliyi - Yetişmə",
      "name_en": "Soil moisture - Maturity",
      "priority": "low",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.stage", "operator": "==", "value": "maturity"},
          {"field": "soil.soil_moisture", "operator": "<", "value": 35}
        ]
      },
      "action": {
        "type": "irrigate",
        "urgency": "low",
        "urgency_score": 30,
        "timing_az": "Yalnız çox quru şəraitdə, yığımdan ən azı 1 həftə əvvəl dayandırın",
        "amount_mm_per_ha": 15
      },
      "message_az": "Yetişmə dövründə minimal suvarma. Yığıma yaxınlaşdıqca suvarmanı dayandırın.",
      "message_en": "Minimal irrigation during maturity. Stop irrigation as harvest approaches."
    },
    {
      "rule_id": "WHT_IRR_007",
      "name_az": "Suvarma intervalı aşımı - Cücərmə",
      "name_en": "Irrigation interval exceeded - Germination",
      "priority": "medium",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.stage", "operator": "==", "value": "germination"},
          {"field": "crop_context.days_since_irrigation", "operator": ">=", "value": 3}
        ]
      },
      "action": {
        "type": "irrigate",
        "urgency": "medium",
        "urgency_score": 60,
        "timing_az": "Bu gün",
        "interval_days": 3
      },
      "message_az": "Son suvarmadan {days_since_irrigation} gün keçib. Cücərmə dövründə hər 3 gündən bir suvarma tövsiyə olunur.",
      "message_en": "{days_since_irrigation} days since last irrigation. Every 3 days recommended during germination."
    },
    {
      "rule_id": "WHT_IRR_008",
      "name_az": "Suvarma intervalı aşımı - Kollanma",
      "name_en": "Irrigation interval exceeded - Tillering",
      "priority": "medium",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.stage", "operator": "==", "value": "tillering"},
          {"field": "crop_context.days_since_irrigation", "operator": ">=", "value": 5}
        ]
      },
      "action": {
        "type": "irrigate",
        "urgency": "medium",
        "urgency_score": 55,
        "timing_az": "Növbəti 1-2 gün ərzində",
        "interval_days": 5
      },
      "message_az": "Son suvarmadan {days_since_irrigation} gün keçib. Kollanma dövründə hər 5 gündən bir suvarma tövsiyə olunur.",
      "message_en": "{days_since_irrigation} days since last irrigation. Every 5 days recommended during tillering."
    },
    {
      "rule_id": "WHT_IRR_009",
      "name_az": "Suvarma intervalı aşımı - Sünbülləmə",
      "name_en": "Irrigation interval exceeded - Heading",
      "priority": "high",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "crop_context.stage", "operator": "==", "value": "heading"},
          {"field": "crop_context.days_since_irrigation", "operator": ">=", "value": 4}
        ]
      },
      "action": {
        "type": "irrigate",
        "urgency": "high",
        "urgency_score": 75,
        "timing_az": "Bu gün",
        "interval_days": 4
      },
      "message_az": "Son suvarmadan {days_since_irrigation} gün keçib. Sünbülləmə kritik dövrüdür - hər 4 gündən bir suvarma vacibdir.",
      "message_en": "{days_since_irrigation} days since last irrigation. Heading is critical - every 4 days essential."
    },
    {
      "rule_id": "WHT_IRR_010",
      "name_az": "Yağış kompensasiyası",
      "name_en": "Rainfall compensation",
      "priority": "info",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "weather.rainfall_last_24h", "operator": ">=", "value": 10}
        ]
      },
      "action": {
        "type": "skip_irrigation",
        "urgency": "info",
        "urgency_score": 10,
        "delay_days_calculation": {
          "rainfall_10_20mm": 2,
          "rainfall_above_20mm": 3
        }
      },
      "message_az": "Son 24 saatda {rainfall_last_24h}mm yağış olub. Suvarmanı {delay} gün təxirə salın.",
      "message_en": "{rainfall_last_24h}mm rainfall in last 24h. Delay irrigation by {delay} days."
    },
    {
      "rule_id": "WHT_IRR_011",
      "name_az": "Yüksək rütubət kompensasiyası",
      "name_en": "High humidity compensation",
      "priority": "info",
      "enabled": true,
      "conditions": {
        "operator": "AND",
        "items": [
          {"field": "weather.humidity", "operator": ">", "value": 75},
          {"field": "weather.temperature", "operator": "<", "value": 25}
        ]
      },
      "action": {
        "type": "reduce_irrigation",
        "urgency": "info",
        "urgency_score": 15,
        "reduction_percent": 25
      },
      "message_az": "Rütubət {humidity}% - suvarma miqdarını 25% azaltmaq olar.",
      "message_en": "Humidity {humidity}% - irrigation amount can be reduced by 25%."
    }
  ]
}
